<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- 루트는 인덱싱하지 않도록 -->
  <meta name="robots" content="noindex, nofollow" />

  <title>Momopick</title>

  <script>
    (function () {

      const SUPPORTED = ["ko", "en", "ja", "es", "pt", "id"];
      const FALLBACK = "ko";
      const BASE = "ver1"; // ver1/ko/index.html, ver1/en/index.html ...

      // 이미 언어 페이지로 들어온 경우 실행 안 함 (ver1/ko/ 등)
      const path = location.pathname.replace(/^\/+/, "");
      if (path.startsWith(BASE + "/") && path.indexOf("/", BASE.length + 1) !== -1) {
        return;
      }

      // 1️⃣ 사용자가 직접 선택한 언어 우선
      const savedLang = localStorage.getItem("momopick_lang");
      if (savedLang && SUPPORTED.includes(savedLang)) {
        location.replace(BASE + "/" + savedLang + "/index.html");
        return;
      }

      // 2️⃣ 브라우저 언어 감지
      const browserLangs = navigator.languages && navigator.languages.length
        ? navigator.languages
        : [navigator.language];

      function detectLanguage(list) {
        for (let lang of list) {
          if (!lang) continue;
          const base = lang.toLowerCase().split("-")[0]; // ko-KR → ko
          if (SUPPORTED.includes(base)) return base;
        }
        return FALLBACK;
      }

      const selectedLang = detectLanguage(browserLangs);

      // 지원하는 언어 폴더만 있음 (현재 ver1/ko/ 만 존재)
      const HAS_LANG_PAGE = { ko: true };
      const targetLang = HAS_LANG_PAGE[selectedLang] ? selectedLang : FALLBACK;
      location.replace(BASE + "/" + targetLang + "/index.html");

    })();
  </script>

</head>
<body>
  Redirecting...
</body>
</html>
