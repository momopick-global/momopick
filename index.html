<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- 루트는 인덱싱하지 않도록 -->
  <meta name="robots" content="noindex, nofollow" />

  <title>Momopick</title>

  <script>
    (function () {

      const SUPPORTED = ["ko", "en", "ja", "es", "pt", "id"];
      const FALLBACK = "en";

      // 이미 언어 폴더로 들어온 경우 실행 안 함
      const path = location.pathname.replace(/^\/+/, "");
      if (SUPPORTED.some(lang => path.startsWith(lang + "/") || path === lang)) {
        return;
      }

      // 1️⃣ 사용자가 직접 선택한 언어 우선
      const savedLang = localStorage.getItem("momopick_lang");
      if (savedLang && SUPPORTED.includes(savedLang)) {
        location.replace("/" + savedLang + "/");
        return;
      }

      // 2️⃣ 브라우저 언어 감지
      const browserLangs = navigator.languages && navigator.languages.length
        ? navigator.languages
        : [navigator.language];

      function detectLanguage(list) {
        for (let lang of list) {
          if (!lang) continue;
          const base = lang.toLowerCase().split("-")[0]; // pt-BR → pt
          if (SUPPORTED.includes(base)) return base;
        }
        return FALLBACK;
      }

      const selectedLang = detectLanguage(browserLangs);

      location.replace("/" + selectedLang + "/");

    })();
  </script>

</head>
<body>
  Redirecting...
</body>
</html>
